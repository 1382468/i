#include <iostream>
#include <string>
#include <locale>  // è§£å†³ä¸­æ–‡ä¹±ç 
using namespace std;

// æ¸¸æˆçŠ¶æ€å˜é‡ï¼ˆè®°å½•æ‰¾åˆ°çš„ç‰©å“ã€çº¿ç´¢ç­‰ï¼‰
bool hasKey = false;    // æ˜¯å¦æ‰¾åˆ°é’¥åŒ™
bool hasNote = false;   // æ˜¯å¦æ‰¾åˆ°çº¸æ¡
bool doorOpened = false;// æ˜¯å¦æ‰“å¼€é—¨

// æ˜¾ç¤ºæˆ¿é—´ä»‹ç»
void showRoomIntro() {
    cout << "==================== å¯†å®¤é€ƒè„± ====================" << endl;
    cout << "ä½ é†’æ¥æ—¶å‘ç°è‡ªå·±åœ¨ä¸€ä¸ªå°é—­çš„å°æˆ¿é—´é‡Œï¼Œæˆ¿é—´é‡Œæœ‰ï¼š" << endl;
    cout << "1. ä¸€æ‰‡é”ç€çš„æœ¨é—¨ï¼ˆå‡ºå£ï¼‰" << endl;
    cout << "2. ä¸€å¼ ç ´æ—§çš„æ¡Œå­" << endl;
    cout << "3. ä¸€ä¸ªé å¢™çš„æŸœå­" << endl;
    cout << "4. åœ°ä¸Šçš„åœ°æ¯¯" << endl;
    cout << "==================================================" << endl;
    cout << "ä½ å¯ä»¥è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤æ¢ç´¢æˆ¿é—´ï¼š" << endl;
    cout << "æŸ¥çœ‹æ¡Œå­ / æŸ¥çœ‹æŸœå­ / æŸ¥çœ‹åœ°æ¯¯ / æŸ¥çœ‹é—¨ / æ‰“å¼€é—¨ / é€€å‡ºæ¸¸æˆ" << endl;
    cout << "==================================================" << endl;
}

// æ¢ç´¢æ¡Œå­ï¼ˆå¯èƒ½æ‰¾åˆ°çº¿ç´¢ï¼‰
void checkTable() {
    cout << "\nä½ èµ°åˆ°æ¡Œå­æ—ï¼Œçœ‹åˆ°æ¡Œå­ä¸Šæœ‰ä¸€å¼ çº¸å’Œä¸€ä¸ªç©ºæ¯å­ã€‚" << endl;
    if (!hasNote) {
        cout << "ä½ æ‹¿èµ·çº¸ï¼Œä¸Šé¢å†™ç€ï¼šé’¥åŒ™è—åœ¨æŸ”è½¯çš„åœ°æ–¹ï½" << endl;
        hasNote = true; // æ ‡è®°æ‰¾åˆ°çº¸æ¡
    } else {
        cout << "æ¡Œå­ä¸Šå·²ç»æ²¡æœ‰æ–°ä¸œè¥¿äº†ï¼Œçº¸æ¡ä¸Šçš„çº¿ç´¢ä½ å·²ç»è®°ä½äº†ã€‚" << endl;
    }
}

// æ¢ç´¢æŸœå­
void checkCabinet() {
    cout << "\nä½ èµ°åˆ°æŸœå­æ—ï¼ŒæŸœå­æ˜¯é”ç€çš„ï¼Œæ‰“ä¸å¼€ã€‚" << endl;
    cout << "çœ‹æ¥éœ€è¦å…ˆæ‰¾åˆ°é’¥åŒ™æ‰èƒ½æ‰“å¼€æŸœå­ã€‚" << endl;
}

// æ¢ç´¢åœ°æ¯¯ï¼ˆå…³é”®ï¼šæ‰¾åˆ°é’¥åŒ™ï¼‰
void checkCarpet() {
    cout << "\nä½ è¹²ä¸‹æ¥æŸ¥çœ‹åœ°æ¯¯ï¼Œåœ°æ¯¯è¾¹ç¼˜æœ‰ç‚¹ç¿˜èµ·æ¥ã€‚" << endl;
    if (!hasKey) {
        cout << "ä½ æ€å¼€åœ°æ¯¯ï¼Œå‘ç°ä¸‹é¢è—ç€ä¸€æŠŠå°é“œé’¥åŒ™ï¼ä½ æŠŠé’¥åŒ™æ”¶äº†èµ·æ¥ã€‚" << endl;
        hasKey = true; // æ ‡è®°æ‰¾åˆ°é’¥åŒ™
    } else {
        cout << "åœ°æ¯¯ä¸‹é¢å·²ç»æ²¡æœ‰ä¸œè¥¿äº†ï¼Œé’¥åŒ™ä½ æ—©å°±æ‹¿èµ°å•¦ã€‚" << endl;
    }
}

// æŸ¥çœ‹é—¨
void checkDoor() {
    cout << "\nä½ èµ°åˆ°é—¨å‰ï¼Œé—¨æŠŠæ‰‹ä¸Šæœ‰ä¸€ä¸ªé’¥åŒ™å­”ï¼Œé—¨æ˜¯é”ç€çš„ã€‚" << endl;
    if (hasKey) {
        cout << "ä½ æ‰‹é‡Œæœ‰é’¥åŒ™ï¼Œç°åœ¨å¯ä»¥è¾“å…¥ã€Œæ‰“å¼€é—¨ã€è¯•è¯•ï¼" << endl;
    }
}

// å°è¯•æ‰“å¼€é—¨ï¼ˆé€ƒè„±æ¡ä»¶ï¼‰
void openDoor() {
    cout << "\nä½ å°è¯•æ‰“å¼€é—¨â€¦â€¦" << endl;
    if (hasKey) {
        cout << "ä½ æŠŠé’¥åŒ™æ’è¿›é’¥åŒ™å­”ï¼Œè½¬åŠ¨é’¥åŒ™ï¼Œã€Œå’”å“’ã€ä¸€å£°ï¼Œé—¨å¼€äº†ï¼" << endl;
        cout << "ä½ æˆåŠŸé€ƒå‡ºå¯†å®¤å•¦ï¼ğŸ‰ æ¸¸æˆèƒœåˆ©ï¼" << endl;
        doorOpened = true; // æ ‡è®°é€ƒè„±æˆåŠŸ
    } else {
        cout << "é—¨æ˜¯é”ç€çš„ï¼Œä½ æ²¡æœ‰é’¥åŒ™ï¼Œæ‰“ä¸å¼€ï¼å…ˆæ‰¾æ‰¾é’¥åŒ™åœ¨å“ªé‡Œå§ã€‚" << endl;
    }
}

int main() {
    // è§£å†³Codespacesé‡Œä¸­æ–‡ä¹±ç çš„é—®é¢˜
    locale::global(locale("zh_CN.UTF-8"));
    cout.imbue(locale());

    string input; // å­˜å‚¨ç©å®¶è¾“å…¥çš„æŒ‡ä»¤
    cout << "ğŸ‰ æ¬¢è¿æ¥åˆ°å¯†å®¤é€ƒè„±æ–‡å­—æ¸¸æˆï¼ğŸ‰" << endl;
    showRoomIntro();

    // æ¸¸æˆä¸»å¾ªç¯ï¼ˆç›´åˆ°é€ƒè„±æˆ–é€€å‡ºï¼‰
    while (!doorOpened) {
        cout << "\nè¯·è¾“å…¥ä½ çš„æŒ‡ä»¤ï¼š";
        getline(cin, input); // è·å–ç©å®¶è¾“å…¥ï¼ˆæ”¯æŒå¸¦ç©ºæ ¼çš„æŒ‡ä»¤ï¼‰

        // åˆ¤æ–­ç©å®¶è¾“å…¥çš„æŒ‡ä»¤
        if (input == "æŸ¥çœ‹æ¡Œå­") {
            checkTable();
        } else if (input == "æŸ¥çœ‹æŸœå­") {
            checkCarpet(); // è¿™é‡Œæ•…æ„å†™åï¼Œæ˜¯å°å½©è›‹ï½
        } else if (input == "æŸ¥çœ‹åœ°æ¯¯") {
            checkCarpet();
        } else if (input == "æŸ¥çœ‹é—¨") {
            checkDoor();
        } else if (input == "æ‰“å¼€é—¨") {
            openDoor();
        } else if (input == "é€€å‡ºæ¸¸æˆ") {
            cout << "æ¸¸æˆç»“æŸï¼Œæ¬¢è¿ä¸‹æ¬¡å†æ¥ç©ï¼" << endl;
            break;
        } else {
            cout << "âŒ æŒ‡ä»¤è¾“å…¥é”™è¯¯ï¼è¯·è¾“å…¥æ­£ç¡®çš„æŒ‡ä»¤ï¼ˆæ¯”å¦‚ï¼šæŸ¥çœ‹æ¡Œå­ï¼‰ã€‚" << endl;
        }
    }

    return 0;
}
